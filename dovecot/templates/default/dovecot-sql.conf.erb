# Generated by Chef, do not hand-edit
<%- db = node[:dovecot][:db] -%>

driver = <%= db[:driver] %>
<%- case db[:driver] -%>
<%- when 'sqlite' -%>
connect = <%= db[:path] %>
<%- when 'mysql', 'pgsql' -%>
connect =     host=<%= db[:host] %> \
            dbname=<%= db[:database] %> \
              user=<%= db[:username] %> \
          password=<%= db[:password] %>
<%- end -%>

default_pass_scheme = SHA512-CRYPT

password_query = SELECT email               AS user, \
                        password            AS password, \
                        5000                AS userdb_uid, \
                        5000                AS userdb_gid, \
                        '/var/mail/virtual' AS userdb_home, \
                        mail_dir            AS userdb_mail \
                 FROM users WHERE email = '%u'

user_query = SELECT uid     AS uid, \
                    gid     AS gid, \
                    homedir AS home, \
                    maildir AS mail \
             FROM users WHERE email = '%u'

iterate_query = SELECT email AS user FROM users
